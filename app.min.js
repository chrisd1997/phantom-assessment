var e="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function h(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var k=h(this);
function m(a,b){if(b)a:{var c=k;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))break a;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&e(c,a,{configurable:!0,writable:!0,value:b})}}m("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
m("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var f=d.length;c=c||0;for(0>c&&(c=Math.max(c+f,0));c<f;c++){var g=d[c];if(g===b||Object.is(g,b))return!0}return!1}});
m("String.prototype.includes",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(b,c||0)}});var p=JSON.parse(window.localStorage.getItem("bookmarks"))||[],q=20<p.length?Math.ceil(p.length/20):1;
function r(a){a.value.length?/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i.test(a.value)?"edit"!==a.getAttribute("data-mode")&&p.includes(a.value)?t(a,"URL is already bookmarked"):(t(a,null),v(a)):t(a,"Please provide a valid URL"):t(a,"This field cannot be empty")}
function t(a,b){var c=a.parentNode.querySelector(".error-field");b&&b.length?(a.classList.add("error"),c.innerHTML=b):(a.classList.remove("error"),c.innerHTML="")}function v(a){a=a.parentNode.parentNode;if("form"===a.tagName.toLowerCase()){var b=!0,c=a.querySelector('button[type="submit"]');a.querySelectorAll("input").forEach(function(d){d.classList.contains("error")&&(b=!1)});c.disabled=!b}}
function w(a){a.preventDefault();a=a.target.querySelector('input[type="url"]');var b=p;"edit"===a.getAttribute("data-mode")&&void 0!==a.getAttribute("data-edit-id")?b[a.getAttribute("data-edit-id")]=a.value:b.push(a.value);x(b);a=document.getElementsByClassName("page-complete")[0];document.getElementsByClassName("page-home")[0].classList.remove("active");a.querySelector("#bookmark-submission").innerText='Your bookmark "'+p.slice(-1)+'" has been added successfully!';a.classList.add("active")}
function y(a){var b=p.filter(function(d,f){return f===a})[0];if(b){var c=document.getElementById("url");c.value=b;c.setAttribute("data-mode","edit");c.setAttribute("data-edit-id",a.toString());c.focus()}}function z(a){p.length&&(x(p.filter(function(b,c){return c!==a})),A(),B())}
function A(){var a=document.getElementsByTagName("table")[0];a.querySelector("tbody").innerHTML="";if(p.length){a=new URLSearchParams(window.location.search);a=parseInt(a.get("page"))||1;var b=20*a;p.slice(20===b?0:b-20,b).forEach(function(f,g){var n=document.createElement("tr"),u=document.createElement("td"),l=document.createElement("a");l.href=f.toString();l.target="_blank";l.appendChild(document.createTextNode(f));u.appendChild(l);f=document.createElement("td");f.innerHTML='<button type="button" class="edit-button" data-id="'+
    g+'"><i class="fal fa-pencil-alt"></i></button><button type="button" class="delete-button" data-id="'+g+'"><i class="fal fa-trash-alt"></i></button>';n.appendChild(u);n.appendChild(f);document.getElementsByTagName("table")[0].querySelector("tbody").appendChild(n)});document.getElementById("counter").innerText="Showing "+(b-20)+" - "+b;b=document.getElementById("prevPage");var c=document.getElementById("nextPage");1===a&&(b.classList.add("disabled"),b.href="#");1<a&&1<q&&(b.classList.remove("disabled"),
    b.href="?page="+(a-1));a!==q?(c.classList.remove("disabled"),c.href="?page="+(a+1)):(c.classList.add("disabled"),c.href="#")}else{b=document.createElement("tr");c=document.createElement("td");c.appendChild(document.createTextNode("No bookmarks available. Go add some!"));var d=document.createElement("td");b.appendChild(c);b.appendChild(d);a.querySelector("tbody").appendChild(b)}}
function B(){if(p.length){var a=document.getElementsByClassName("pagination-items")[0];a.innerHTML="";for(var b=1;b<=q;b++){var c=document.createElement("a");c.href="?page="+b;c.appendChild(document.createTextNode(b.toString()));a.appendChild(c)}}}function x(a){window.localStorage.setItem("bookmarks",JSON.stringify(a));p=JSON.parse(window.localStorage.getItem("bookmarks"))||[];q=20<p.length?Math.ceil(p.length/20):1}
(function(){var a=document.getElementById("url");document.getElementById("add-form").addEventListener("submit",w);a.addEventListener("blur",function(b){r(b.target);b.target.setAttribute("data-mode","new");b.target.removeAttribute("data-edit-id")});a.addEventListener("keyup",function(b){return r(b.target)});B();A();document.addEventListener("click",function(b){b.target&&b.target.classList.contains("edit-button")?y(parseInt(b.target.dataset.id)):b.target&&b.target.classList.contains("delete-button")&&
    z(parseInt(b.target.dataset.id))})})();